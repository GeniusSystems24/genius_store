# وحدة التوطين

[![الإنجليزية](https://img.shields.io/badge/Language-English-blueviolet?style=for-the-badge)](README.md)

يحتوي هذا الدليل على بنية التدويل والتوطين لتطبيق متجر جينيوس.

## الغرض

توفر وحدة التوطين دعمًا متعدد اللغات، مما يسمح للتطبيق بعرض النصوص بلغات مختلفة بناءً على تفضيلات المستخدم أو إعدادات الجهاز. حيث تقوم بـ:

- إدارة سلاسل الترجمة لجميع نصوص التطبيق
- التعامل مع تغييرات اللغة والتبديل بين اللغات
- توفير أدوات لتنسيق القيم الخاصة باللغة (التواريخ، الأرقام، العملات)
- دعم اللغات من اليمين إلى اليسار (RTL)

## المكونات

### AppLocalizations

فئة `AppLocalizations` هي نقطة الدخول الرئيسية للتوطين:

- تحميل وحفظ الترجمات للغة الحالية
- توفير الوصول إلى السلاسل المترجمة
- تضمين المندوب لنظام التوطين في Flutter
- التعامل مع الرجوع إلى اللغة الافتراضية عند فقدان الترجمات

### ملفات الترجمة

ملفات JSON تحتوي على السلاسل المترجمة لكل لغة مدعومة:

- `en.json`: الترجمات الإنجليزية (الافتراضية)
- `ar.json`: الترجمات العربية
- ملفات لغات إضافية حسب الحاجة

### أدوات التوطين

دوال مساعدة للعمليات الخاصة باللغة:

- `LocaleFormatter`: تنسيق التواريخ والأرقام والعملات وفقًا للغة
- `LocaleUtils`: أدوات مساعدة للعمل مع اللغات، بما في ذلك كشف اللغات من اليمين إلى اليسار
- `LocalePrefService`: إدارة تفضيلات لغة المستخدم

## اللغات المدعومة

يدعم التطبيق حاليًا اللغات التالية:

- الإنجليزية (en) - الافتراضية
- العربية (ar)

## الاستخدام

### الوصول إلى الترجمات

```dart
// استخدام امتداد BuildContext
Text(context.l10n.welcomeMessage);

// استخدام AppLocalizations مباشرة
final localizations = AppLocalizations.of(context);
Text(localizations.productDetails);

// استخدام الترجمات المعلمة
Text(context.l10n.itemCount(5));
```

### تغيير اللغات

```dart
// تغيير لغة التطبيق
await LocalePrefService.setPreferredLocale(const Locale('ar'));
```

### تنسيق القيم بناءً على اللغة

```dart
// تنسيق تاريخ وفقًا للغة الحالية
final formattedDate = LocaleFormatter.formatDate(
  dateTime: DateTime.now(),
  context: context,
);

// تنسيق العملة
final formattedPrice = LocaleFormatter.formatCurrency(
  amount: 99.99,
  context: context,
);
```

## إضافة ترجمات جديدة

لإضافة ترجمات لنص جديد:

1. إضافة المفتاح والقيمة الإنجليزية إلى `en.json`
2. إضافة المفتاح والقيمة المترجمة إلى جميع ملفات اللغات الأخرى
3. إضافة طريقة الوصول إلى فئة `AppLocalizations`

## إضافة لغة جديدة

لإضافة دعم للغة جديدة:

1. إنشاء ملف JSON جديد مسمى برمز اللغة (مثل `fr.json`)
2. ترجمة جميع المفاتيح من الملف الإنجليزي
3. إضافة اللغة إلى اللغات المدعومة في `AppConfig`
4. تحديث `AppLocalizations.delegate.supportedLocales`
