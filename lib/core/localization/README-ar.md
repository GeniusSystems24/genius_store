# وحدة التعريب (Localization Module)

[![English](https://img.shields.io/badge/Language-English-blueviolet?style=for-the-badge)](README.md)

يحتوي هذا الدليل على بنية التدويل والتعريب لتطبيق متجر Genius.

## الغرض

توفر وحدة التعريب دعمًا متعدد اللغات، مما يسمح للتطبيق بعرض النصوص بلغات مختلفة بناءً على تفضيلات المستخدم أو إعدادات الجهاز. وهي:

- تدير سلاسل الترجمة لجميع نصوص التطبيق
- تتعامل مع تغييرات اللغة المحلية وتبديل اللغات
- توفر أدوات مساعدة لتنسيق القيم الخاصة بلغة محددة (التواريخ، الأرقام، العملات)
- تدعم اللغات التي تكتب من اليمين إلى اليسار (RTL)

## المكونات

### AppLocalizations

فئة `AppLocalizations` هي نقطة الدخول الرئيسية للتعريب:

- تحمل وتحتفظ بالترجمات للغة المحلية الحالية
- توفر الوصول إلى السلاسل المترجمة
- تتضمن المندوب لنظام التعريب في Flutter
- تتعامل مع الرجوع إلى اللغة الافتراضية عند فقدان الترجمات

### ملفات الترجمة

ملفات JSON تحتوي على السلاسل المترجمة لكل لغة مدعومة:

- `en.json`: الترجمات الإنجليزية (افتراضية)
- `ar.json`: الترجمات العربية
- ملفات لغات إضافية حسب الحاجة

### أدوات التعريب المساعدة

دوال مساعدة للعمليات الخاصة باللغة المحلية:

- `LocaleFormatter`: ينسق التواريخ والأرقام والعملات وفقًا للغة المحلية
- `LocaleUtils`: أدوات مساعدة للعمل مع اللغات المحلية، بما في ذلك اكتشاف RTL
- `LocalePrefService`: يدير تفضيلات لغة المستخدم

## اللغات المدعومة

يدعم التطبيق حاليًا اللغات التالية:

- الإنجليزية (en) - افتراضية
- العربية (ar)

## الاستخدام

### الوصول إلى الترجمات

```dart
// استخدام امتداد BuildContext
Text(context.l10n.welcomeMessage);

// استخدام AppLocalizations مباشرة
final localizations = AppLocalizations.of(context);
Text(localizations.productDetails);

// استخدام الترجمات المعلمة
Text(context.l10n.itemCount(5));
```

### تبديل اللغات

```dart
// تغيير لغة التطبيق
await LocalePrefService.setPreferredLocale(const Locale('ar'));
```

### تنسيق القيم بناءً على اللغة المحلية

```dart
// تنسيق تاريخ وفقًا للغة المحلية الحالية
final formattedDate = LocaleFormatter.formatDate(
  dateTime: DateTime.now(),
  context: context,
);

// تنسيق العملة
final formattedPrice = LocaleFormatter.formatCurrency(
  amount: 99.99,
  context: context,
);
```

## إضافة ترجمات جديدة

لإضافة ترجمات لسلسلة جديدة:

1. أضف المفتاح والقيمة الإنجليزية إلى `en.json`
2. أضف المفتاح والقيمة المترجمة إلى جميع ملفات اللغات الأخرى
3. أضف طريقة الحصول (getter) إلى فئة `AppLocalizations`

## إضافة لغة جديدة

لإضافة دعم للغة جديدة:

1. قم بإنشاء ملف JSON جديد مسمى برمز اللغة (مثل `fr.json`)
2. ترجم جميع المفاتيح من الملف الإنجليزي
3. أضف اللغة المحلية إلى اللغات المدعومة في `AppConfig`
4. قم بتحديث `AppLocalizations.delegate.supportedLocales`
